# frida-ios-dumper
iOS 점검 시 앱 추출할때 유용합니다.
최근 Rootless 방식의 탈옥이 등장하면서 USB 인식에 문제가 발생하는 경우가 있습니다.
이와 관련해 GitHub에서 스크립트를 내려받고, USB 설정이나 일부 코드를 직접 수정해야 하는 번거로움이 있어,
이를 보완한 수정된 스크립트를 공유드립니다.

---

## 📦 프로젝트 개요

- iOS 앱을 메모리에서 덤프하여 `.ipa` 파일로 추출
- 도파민 등 탈옥 환경에서 사용 가능
- Windows 환경에 맞춰 명령어 및 압축 도구 수정

---

## 🛠 사용법

---

### 1. 의존성 설치

```bash
pip install -r requirements.txt
```

---

### 2. 스크립트 설정

`dumper.py` 파일 상단에 다음 정보를 직접 입력해야 합니다:

| 변수명       | 설명                                   |
|--------------|----------------------------------------|
| `user`       | SSH 접속 계정 (`mobile` 권장)          |
| `password`   | 해당 계정의 비밀번호                   |
| `device_ip`  | 대상 iOS 단말기의 IP 주소              |
| `ssh_port`   | SSH 포트 (기본값: `22`)                |

> ⚠️ **도파민 탈옥 환경**에서는 `root` 계정이 차단된 경우가 있어 `mobile` 계정을 사용하는 것이 더 안정적입니다.

---

### 3. Identifier 확인

덤프할 앱의 Identifier(번들 ID)를 확인하려면 다음 명령어 중 하나를 사용하세요:

```bash
python dumper.py --list
# 또는
frida-ps -Ua
```

- 해당 앱이 **실행 중이어야** Identifier가 정상적으로 표시됩니다.
- 앱 실행 시 **탐지 로직으로 자동 종료되는 앱**은 우회 후 다시 실행하여 확인해야 합니다.

---

### 4. 앱 추출

Identifier를 확인한 뒤, 다음 명령어로 앱을 추출할 수 있습니다:

```bash
python dumper.py [Identifier]
```

- 추출된 `.ipa` 파일은 현재 실행 중인 디렉토리에 저장됩니다.
- 추출 과정에서 로그를 확인하며 진행 상태를 파악할 수 있습니다.

---

## ✨ 주요 수정 사항

### ✅ 1. USB 인식 개선

- 기존에는 `devices[0]`, `devices[1]` 등 인덱스를 직접 지정해야 했으나,
- 디바이스 이름이 존재할 경우 해당 디바이스 ID를 **자동으로 탐색**하도록 수정했습니다.

### ✅ 2. 윈도우 호환 명령어로 변경

- 리눅스용 명령어 `chmod -r 7xx` → Windows의 `attrib -r`로 수정
- `.zip` 명령어가 없어 압축 시 에러가 발생하던 문제 → `7z.exe`를 사용해 해결  
  → `7z.exe`는 스크립트와 함께 제공됩니다.

---

## 🧪 테스트 환경

- OS: Windows 10 / 11
- Python 3.x
- Frida 설치 필요 (frida < v17.0.0)
- Dopamine 탈옥 환경 지원

---

## 📄 라이선스

본 프로젝트는 내부 점검 도구 공유를 목적으로 하며, 별도 라이선스 없이 제공됩니다.  
상업적 목적의 무단 재배포는 금지되어 있습니다.
